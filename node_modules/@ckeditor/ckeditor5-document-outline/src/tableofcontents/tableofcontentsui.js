/*
 *             Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
import{ButtonView as _0x4a6034,MenuBarMenuListItemButtonView as _0x479989}from'ckeditor5/src/ui.js';import{CKEditorError as _0x48aa6f}from'ckeditor5/src/utils.js';import{Plugin as _0x1f1817}from'ckeditor5/src/core.js';import{icons as _0x3918fa}from'ckeditor5-collaboration/src/collaboration-core.js';export default class s extends _0x1f1817{static get['pluginName'](){return'TableOfContentsUI';}constructor(_0x19efb0){super(_0x19efb0),this['_licenseKeyCheckInterval']=null;}['init'](){const _0x52900b=this['editor'];_0x52900b['ui']['componentFactory']['add']('tableOfContents',()=>{const _0x3f9c37=this['_createButton'](_0x4a6034);return _0x3f9c37['tooltip']=!0x0,_0x3f9c37;}),_0x52900b['ui']['componentFactory']['add']('menuBar:tableOfContents',()=>this['_createButton'](_0x479989)),this['licenseKey']=_0x52900b['config']['get']('licenseKey');const _0x18aa80=this['editor'];this['_licenseKeyCheckInterval']=setInterval(()=>{let _0xf6f497;for(const _0x145b92 in _0x18aa80){const _0x4b538a=_0x145b92,_0x50ef75=_0x18aa80[_0x4b538a];if('tableOfContentsLicenseKeyTrial'===_0x50ef75||'tableOfContentsLicenseKeyInvalid'===_0x50ef75||'tableOfContentsLicenseKeyValid'===_0x50ef75||'tableOfContentsLicenseKeyTrialLimit:operations'===_0x50ef75){delete _0x18aa80[_0x4b538a],_0xf6f497=_0x50ef75;break;}}if('tableOfContentsLicenseKeyInvalid'===_0xf6f497)throw clearInterval(this['_licenseKeyCheckInterval']),new _0x48aa6f('table-of-contents-invalid-license-key',null);if('tableOfContentsLicenseKeyTrial'===_0xf6f497&&console['info']('You\x20are\x20using\x20the\x20trial\x20version\x20of\x20CKEditor\x205\x20table\x20of\x20contents\x20plugin\x20with\x20limited\x20usage.\x20Make\x20sure\x20you\x20will\x20not\x20use\x20it\x20in\x20the\x20production\x20environment.'),'tableOfContentsLicenseKeyTrialLimit:operations'===_0xf6f497)throw clearInterval(this['_licenseKeyCheckInterval']),new _0x48aa6f('table-of-contents-trial-license-key-reached-limit-changes',null);'tableOfContentsLicenseKeyValid'===_0xf6f497&&clearInterval(this['_licenseKeyCheckInterval']);},0x3e8);}['_createButton'](_0x15305d){const _0x8bb8=this['editor'],t=_0x8bb8['locale']['t'],_0x7c3f7f=_0x8bb8['commands']['get']('insertTableOfContents'),_0x15c407=new _0x15305d(_0x8bb8['locale']);return _0x15c407['set']({'label':t('Table\x20of\x20contents'),'icon':_0x3918fa['tableOfContents']}),_0x15c407['bind']('isEnabled')['to'](_0x7c3f7f,'isEnabled'),this['listenTo'](_0x15c407,'execute',()=>{_0x8bb8['execute']('insertTableOfContents'),_0x8bb8['editing']['view']['focus']();}),_0x15c407;}['destroy'](){this['_licenseKeyCheckInterval']&&clearInterval(this['_licenseKeyCheckInterval']);}}