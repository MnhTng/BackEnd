/*
 *             Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
function _0x2fc2(){const _0x1daac0=['listenTo','getUser','getMany','size','_waitForServiceReady','_fetchMissingUsersForThreads','cloud-services-internal-error:\x20Request\x20timeout.','message','startsWith','cloud-services-internal-error:\x20Not\x20connected.','values','set','_saved','catch','addUser','suggestionUpdated','off','4318385BxWikG','reconnect','connection','788384AexCjE','type','TrackChangesService','state','find','2923320NjQiiu','getSuggestion','_bufferedRequests','update','open','requires','1755088UFmdpQ','originalSuggestionId','add','then','19116BckzoY','collaboration.channelId','2367376DbFrZh','45GyKcfB','isConnected','data','adapter','270RGkMAL','init','connect','config','editor','attributes','addToReconnectionStack','_trackChangesService','TrackChangesEditing','hasSuggestion','connected','5496610NyOsWj','addSuggestionData','delete','get','from','plugins'];_0x2fc2=function(){return _0x1daac0;};return _0x2fc2();}const _0x590983=_0x2d33;(function(_0x6bc1e7,_0x2b88d0){const _0x47ec4e=_0x2d33,_0x515eb5=_0x6bc1e7();while(!![]){try{const _0x1702a6=-parseInt(_0x47ec4e(0xf5))/0x1+parseInt(_0x47ec4e(0x104))/0x2*(-parseInt(_0x47ec4e(0x10b))/0x3)+-parseInt(_0x47ec4e(0x100))/0x4+parseInt(_0x47ec4e(0xf2))/0x5+-parseInt(_0x47ec4e(0xfa))/0x6+parseInt(_0x47ec4e(0x116))/0x7+parseInt(_0x47ec4e(0x106))/0x8*(parseInt(_0x47ec4e(0x107))/0x9);if(_0x1702a6===_0x2b88d0)break;else _0x515eb5['push'](_0x515eb5['shift']());}catch(_0x2727ef){_0x515eb5['push'](_0x515eb5['shift']());}}}(_0x2fc2,0x873c1));import{Plugin as _0x577593}from'ckeditor5/src/core.js';import{User as _0x215973,TrackChangesService as _0x1c5e7b}from'@ckeditor/ckeditor-cloud-services-collaboration/src/services.js';import _0x28f1a7 from'../realtimecollaborativeediting/websocketgateway.js';import _0x267e62 from'../realtimecollaborativecomments/cloudservicescommentsadapter.js';import{Users as _0x257cf9}from'ckeditor5-collaboration/src/collaboration-core.js';class g extends _0x577593{static get[_0x590983(0xff)](){const _0x2e3642=_0x590983;return[_0x267e62,_0x2e3642(0x113),_0x28f1a7];}constructor(_0x4d1859){const _0x4a2f58=_0x590983;super(_0x4d1859);const _0x557e18=this[_0x4a2f58(0x10f)][_0x4a2f58(0x10e)][_0x4a2f58(0x119)](_0x4a2f58(0x105));this[_0x4a2f58(0xfc)]=new Map(),this[_0x4a2f58(0x112)]=new g[(_0x4a2f58(0xf7))](_0x557e18);}[_0x590983(0x10c)](){const _0x4cfa60=_0x590983,_0x834572=this[_0x4cfa60(0x10f)][_0x4cfa60(0x11b)][_0x4cfa60(0x119)](_0x28f1a7),_0x23ceaa=this[_0x4cfa60(0x10f)][_0x4cfa60(0x11b)][_0x4cfa60(0x119)](_0x4cfa60(0x113));return _0x23ceaa[_0x4cfa60(0x10a)]={'getSuggestion':async _0x96f5e1=>{const _0xc87239=_0x4cfa60;await this[_0xc87239(0x120)]();const _0x3ec7d6=await this[_0xc87239(0x112)][_0xc87239(0x119)](_0x96f5e1)[_0xc87239(0x129)](B);return await this[_0xc87239(0x121)]([_0x3ec7d6]),_0x3ec7d6;},'addSuggestion':async({id:_0x23be43,type:_0x4771e4,data:_0x3f9701,originalSuggestionId:_0x3ece6f,attributes:_0x500462})=>{const _0x2f1492=_0x4cfa60;await this[_0x2f1492(0x120)]();const _0x3fedc8={'id':_0x23be43,'type':_0x4771e4,'data':_0x3f9701,'originalSuggestionId':_0x3ece6f,'attributes':_0x500462},_0x5f2a70=await this[_0x2f1492(0x112)][_0x2f1492(0x102)](_0x23be43,_0x4771e4,_0x3f9701,_0x3ece6f,_0x500462)[_0x2f1492(0x129)](_0x460834=>{if(st(_0x460834))return new Promise(_0x53ad85=>{const _0x3e71e6=_0x2d33;this[_0x3e71e6(0xfc)][_0x3e71e6(0x127)](_0x23be43,{'resolve':_0x53ad85,'suggestionData':_0x3fedc8});});throw _0x460834;});return this[_0x2f1492(0xfc)][_0x2f1492(0x118)](_0x23be43),_0x5f2a70;},'updateSuggestion':async(_0x49c4b7,_0x2cec2c)=>{const _0x2b7514=_0x4cfa60;if(await this[_0x2b7514(0x120)](),_0x2b7514(0xfe)!==_0x2cec2c[_0x2b7514(0xf8)])return this[_0x2b7514(0x112)][_0x2b7514(0xfd)](_0x49c4b7,_0x2cec2c)[_0x2b7514(0x129)](B);}},this[_0x4cfa60(0x11c)](this[_0x4cfa60(0x112)],_0x4cfa60(0xf0),(_0x1a10c9,_0x5bb33e)=>{const _0x705e70=_0x4cfa60;_0x23ceaa[_0x705e70(0x114)](_0x5bb33e['id'])&&(_0x23ceaa[_0x705e70(0xfb)](_0x5bb33e['id'])[_0x705e70(0x110)]=_0x5bb33e[_0x705e70(0x110)]);}),this[_0x4cfa60(0x112)][_0x4cfa60(0x10d)](_0x834572[_0x4cfa60(0xf4)])[_0x4cfa60(0x103)](_0x1238b3=>(_0x834572[_0x4cfa60(0x111)](this),this[_0x4cfa60(0x121)](_0x1238b3)[_0x4cfa60(0x103)](()=>{const _0x4b7b58=_0x4cfa60;for(const _0x5da8ec of _0x1238b3){_0x23ceaa[_0x4b7b58(0x117)](_0x5da8ec)[_0x4b7b58(0x128)]=!0x0;}})));}async[_0x590983(0xf3)](){const _0x599ccb=_0x590983,_0x116135=this[_0x599ccb(0x10f)][_0x599ccb(0x11b)][_0x599ccb(0x119)](_0x599ccb(0x113)),{connection:_0x4dd848}=this[_0x599ccb(0x10f)][_0x599ccb(0x11b)][_0x599ccb(0x119)](_0x28f1a7),_0x571816=await this[_0x599ccb(0x112)][_0x599ccb(0x10d)](_0x4dd848);await this[_0x599ccb(0x121)](_0x571816);for(const {suggestionData:_0x51ae50,resolve:_0x5c5693}of this[_0x599ccb(0xfc)][_0x599ccb(0x126)]()){let _0x2e07d6=_0x571816[_0x599ccb(0xf9)](_0x307b18=>_0x307b18['id']===_0x51ae50['id']);_0x2e07d6||(_0x2e07d6=await this[_0x599ccb(0x112)][_0x599ccb(0x102)](_0x51ae50['id'],_0x51ae50[_0x599ccb(0xf6)],_0x51ae50[_0x599ccb(0x109)],_0x51ae50[_0x599ccb(0x101)])),_0x5c5693(_0x2e07d6);}for(const _0x5d6de1 of _0x571816)_0x116135[_0x599ccb(0x114)](_0x5d6de1['id'])||_0x116135[_0x599ccb(0x117)](_0x5d6de1);}async[_0x590983(0x120)](){const _0xac3177=_0x590983;this[_0xac3177(0x112)][_0xac3177(0x108)]||await new Promise(_0x234090=>{const _0xd37502=_0xac3177;this[_0xd37502(0x11c)](this[_0xd37502(0x112)],_0xd37502(0x115),_0x50eed5=>{const _0x2cabd6=_0xd37502;_0x50eed5[_0x2cabd6(0xf1)](),_0x234090();});});}async[_0x590983(0x121)](_0x103561){const _0x424b5e=_0x590983,_0x23405f=this[_0x424b5e(0x10f)][_0x424b5e(0x11b)][_0x424b5e(0x119)](_0x257cf9),{connection:_0x27e2f3}=this[_0x424b5e(0x10f)][_0x424b5e(0x11b)][_0x424b5e(0x119)](_0x28f1a7),_0xfc02cc=new Set();for(const {authorId:_0x4a126e}of _0x103561)_0x23405f[_0x424b5e(0x11d)](_0x4a126e)||_0xfc02cc[_0x424b5e(0x102)](_0x4a126e);if(0x0===_0xfc02cc[_0x424b5e(0x11f)])return;const _0x23c6b1=await _0x215973[_0x424b5e(0x11e)](_0x27e2f3,Array[_0x424b5e(0x11a)](_0xfc02cc));for(const _0x1d4301 of _0x23c6b1)_0x23405f[_0x424b5e(0x11d)](_0x1d4301['id'])||_0x23405f[_0x424b5e(0x12a)](_0x1d4301);}}g[_0x590983(0xf7)]=_0x1c5e7b;export default g;function _0x2d33(_0x1ccfa7,_0x526fa8){const _0x2fc208=_0x2fc2();return _0x2d33=function(_0x2d33f1,_0x423ed6){_0x2d33f1=_0x2d33f1-0xf0;let _0x100381=_0x2fc208[_0x2d33f1];return _0x100381;},_0x2d33(_0x1ccfa7,_0x526fa8);}function B(_0x20c746){if(st(_0x20c746))return new Promise(()=>{});throw _0x20c746;}function st(_0x54b9c7){const _0x4211f2=_0x590983;return _0x54b9c7[_0x4211f2(0x123)][_0x4211f2(0x124)](_0x4211f2(0x125))||_0x54b9c7[_0x4211f2(0x123)][_0x4211f2(0x124)](_0x4211f2(0x122));}