/*
 *             Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x14e507=_0x139a;(function(_0x5b792e,_0x40e54b){const _0x2ad554=_0x139a,_0x3a49c3=_0x5b792e();while(!![]){try{const _0x4b0816=-parseInt(_0x2ad554(0x12f))/0x1+parseInt(_0x2ad554(0x13e))/0x2+parseInt(_0x2ad554(0x141))/0x3*(-parseInt(_0x2ad554(0x153))/0x4)+parseInt(_0x2ad554(0x166))/0x5+-parseInt(_0x2ad554(0x14b))/0x6*(-parseInt(_0x2ad554(0x14f))/0x7)+-parseInt(_0x2ad554(0x121))/0x8+parseInt(_0x2ad554(0x13c))/0x9;if(_0x4b0816===_0x40e54b)break;else _0x3a49c3['push'](_0x3a49c3['shift']());}catch(_0x8aaa8b){_0x3a49c3['push'](_0x3a49c3['shift']());}}}(_0x5a0f,0xdac9b));function _0x5a0f(){const _0x310d42=['plugins','addUser','commentThreadReopened','map','4471gIbrCG','_fetchMissingUsersForThreads','commentThreadUpdated','CloudServicesCommentsAdapter','getConnectedSessions','resolvedBy','commentAdded','deletedAt','_getService','reconnect','disconnect','collaboration.channelId','createdAt','17529408eGhKve','content','1382476pCeuam','set','addCommentThread','9xRBtnZ','_setUpService','remove','cloudservicescommentsadapter-service-not-exist','mySessionId','updateCommentThread','resolveCommentThread','addComment','cloudservicescommentsadapter-connect-already-connected','catch','6ygVjLo','resolvedAt','cloud-services-internal-error:\x20Comments\x20Service\x20is\x20not\x20connected.','commentThreadAdded','2602936mTrdyQ','cloud-services-internal-error:\x20Request\x20timeout.','listenTo','commentThreadRemoved','1827308LZuJpP','commentThreadId','has','pluginName','comments','getUser','context','commentThreadResolved','cloud-services-internal-error:\x20Not\x20connected.','removeComment','attributes','keys','permissions','getCommentThread','commentId','off','code','cloudservicescommentsadapter-disconnect-not-exist','CommentsService','2699490MPOUrU','assign','delete','message','getCommentThreads','addToReconnectionStack','reopenCommentThread','resolve','requires','removeCommentThread','get','setPermissions','sessionAdd:','connect','update','commentRemoved','404','reopen','size','_services','getMany','updateComment','CommentsRepository','register','unregister','authorId','from','config','_connectService','init','10236712PZLCBo','getComment','commentUpdated','Permissions','userId','adapter','add','startsWith','destroy','_terminateService'];_0x5a0f=function(){return _0x310d42;};return _0x5a0f();}import{Context as _0x3bdf31,ContextPlugin as _0x9f4955}from'ckeditor5/src/core.js';import{CKEditorError as _0xd9532f}from'ckeditor5/src/utils.js';import{Users as _0x3bfb72}from'ckeditor5-collaboration/src/collaboration-core.js';import{CommentsService as _0x3906aa,User as _0x58cda2}from'@ckeditor/ckeditor-cloud-services-collaboration/src/services.js';import _0x39fb70 from'../realtimecollaborativeediting/websocketgateway.js';import _0x10c4e9 from'../realtimecollaborativeediting/sessions.js';class a extends _0x9f4955{static get[_0x14e507(0x16e)](){const _0x234cae=_0x14e507;return[_0x39fb70,_0x234cae(0x17c),_0x10c4e9,_0x3bfb72];}static get[_0x14e507(0x156)](){const _0x51a233=_0x14e507;return _0x51a233(0x132);}constructor(_0x57d861){const _0x15925a=_0x14e507;super(_0x57d861),this[_0x15925a(0x179)]=new Map();}async[_0x14e507(0x120)](){const _0x319766=_0x14e507,_0x27afe5=this[_0x319766(0x159)],_0xae3e71=_0x27afe5[_0x319766(0x12b)][_0x319766(0x170)](_0x319766(0x17c));if(_0x27afe5[_0x319766(0x12b)][_0x319766(0x170)](_0x39fb70)[_0x319766(0x16b)](this),_0xae3e71[_0x319766(0x126)]={'addCommentThread':async({channelId:_0x70dd2d,threadId:_0x392966,comments:_0xeaf4e,resolvedAt:_0x443ef4,resolvedBy:_0x22a173,context:_0x34336b,attributes:_0x5a8585})=>{const _0x491133=_0x319766,_0x6d3909=await this[_0x491133(0x137)](_0x70dd2d)[_0x491133(0x140)]({'commentThreadId':_0x392966,'comments':_0xeaf4e[_0x491133(0x12e)](_0xeb23e6=>function(_0x5505db,_0x5758f2,_0x486e1c){const _0x3af592=_0x491133;return{'commentThreadId':_0x486e1c,'commentId':_0x5505db[_0x3af592(0x161)],'userId':_0x5505db[_0x3af592(0x17f)],'content':_0x5505db[_0x3af592(0x13d)],'documentId':_0x5758f2,'createdAt':_0x5505db[_0x3af592(0x13b)],'attributes':_0x5505db[_0x3af592(0x15d)]||{}};}(_0xeb23e6,_0x70dd2d,_0x392966)),'resolvedAt':_0x443ef4,'resolvedBy':_0x22a173,'context':_0x34336b,'attributes':_0x5a8585})[_0x491133(0x14a)](B);return{'threadId':_0x6d3909[_0x491133(0x154)],'comments':_0x6d3909[_0x491133(0x157)]};},'getCommentThread':async({channelId:_0x1a26d8,threadId:_0x4aca0c})=>{const _0x244636=_0x319766,_0x43d0e2=await this[_0x244636(0x137)](_0x1a26d8)[_0x244636(0x160)](_0x4aca0c)[_0x244636(0x14a)](B);return await this[_0x244636(0x130)]([_0x43d0e2]),{'threadId':_0x43d0e2[_0x244636(0x154)],'comments':_0x43d0e2[_0x244636(0x157)][_0x244636(0x12e)](R),'context':_0x43d0e2[_0x244636(0x159)],'resolvedAt':_0x43d0e2[_0x244636(0x14c)],'resolvedBy':_0x43d0e2[_0x244636(0x134)],'attributes':_0x43d0e2[_0x244636(0x15d)]||{}};},'updateCommentThread':async({channelId:_0x33ba1b,threadId:_0x7611ab,context:_0x3b2f34,unlinkedAt:_0x496256,attributes:_0x5ef460})=>this[_0x319766(0x137)](_0x33ba1b)[_0x319766(0x146)]({'commentThreadId':_0x7611ab,'context':_0x3b2f34,'attributes':_0x5ef460,'unlinkedAt':_0x496256})[_0x319766(0x14a)](F)[_0x319766(0x14a)](B),'resolveCommentThread':async({channelId:_0x512e8c,threadId:_0xc049e7})=>{const _0x228fbf=_0x319766,_0x240fb1=await this[_0x228fbf(0x137)](_0x512e8c)[_0x228fbf(0x147)](_0xc049e7)[_0x228fbf(0x14a)](F)[_0x228fbf(0x14a)](B);return{'threadId':_0x240fb1[_0x228fbf(0x154)],'resolvedAt':_0x240fb1[_0x228fbf(0x14c)],'resolvedBy':_0x240fb1[_0x228fbf(0x134)]};},'reopenCommentThread':async({channelId:_0x5d5e98,threadId:_0x154b89})=>this[_0x319766(0x137)](_0x5d5e98)[_0x319766(0x16c)](_0x154b89)[_0x319766(0x14a)](F)[_0x319766(0x14a)](B),'removeCommentThread':({channelId:_0x36b72b,threadId:_0xcc81b1})=>this[_0x319766(0x137)](_0x36b72b)[_0x319766(0x16f)](_0xcc81b1)[_0x319766(0x14a)](F)[_0x319766(0x14a)](B),'addComment':({channelId:_0x425d66,threadId:_0x4fafe2,commentId:_0xdd95f4,content:_0x4a5a26,attributes:_0x20b089})=>this[_0x319766(0x137)](_0x425d66)[_0x319766(0x148)](_0x4fafe2,_0xdd95f4,_0x4a5a26,_0x20b089)[_0x319766(0x14a)](B),'updateComment':({channelId:_0x41edc0,threadId:_0x10521a,commentId:_0x1828db,content:_0x477f38,attributes:_0x70a62})=>this[_0x319766(0x137)](_0x41edc0)[_0x319766(0x17b)](_0x10521a,_0x1828db,_0x477f38,_0x70a62)[_0x319766(0x14a)](F)[_0x319766(0x14a)](B),'removeComment':({channelId:_0x341b5a,threadId:_0x3138c3,commentId:_0x42660a})=>this[_0x319766(0x137)](_0x341b5a)[_0x319766(0x15c)](_0x3138c3,_0x42660a)[_0x319766(0x14a)](F)[_0x319766(0x14a)](B)},_0x27afe5 instanceof _0x3bdf31){const _0x73e33a=_0x27afe5[_0x319766(0x11e)][_0x319766(0x170)](_0x319766(0x13a)),_0x353cb3=_0x27afe5[_0x319766(0x12b)][_0x319766(0x170)](_0x10c4e9);await this[_0x319766(0x142)](_0x73e33a);const _0x28ab51=await this[_0x319766(0x179)][_0x319766(0x170)](_0x73e33a)[_0x319766(0x133)]();this[_0x319766(0x151)](_0x353cb3,_0x319766(0x172)+_0x73e33a,(_0xff4ded,{session:_0x8101d2})=>{const _0x3e8674=_0x319766;_0x8101d2['id']===_0x353cb3[_0x3e8674(0x145)]&&(_0xff4ded[_0x3e8674(0x162)](),this[_0x3e8674(0x159)][_0x3e8674(0x12b)][_0x3e8674(0x170)](_0x3e8674(0x124))[_0x3e8674(0x171)](_0x8101d2[_0x3e8674(0x15f)],_0x73e33a));}),_0x353cb3[_0x319766(0x17d)](_0x73e33a,_0x28ab51);}}async[_0x14e507(0x142)](_0x3e8eb6){const _0x236e70=_0x14e507;if(this[_0x236e70(0x179)][_0x236e70(0x155)](_0x3e8eb6))throw new _0xd9532f(_0x236e70(0x149),null,{'channelId':_0x3e8eb6});const _0x590d9e=this[_0x236e70(0x159)][_0x236e70(0x12b)][_0x236e70(0x170)](_0x236e70(0x17c)),_0x430191=new a[(_0x236e70(0x165))](_0x3e8eb6);this[_0x236e70(0x179)][_0x236e70(0x13f)](_0x3e8eb6,_0x430191),this[_0x236e70(0x151)](_0x430191,_0x236e70(0x14e),(_0x416955,_0x4dff12)=>{const _0x573053=_0x236e70,{commentThreadId:_0x359200,documentId:_0x2788fb,context:_0x108d26,attributes:_0x231d67,resolvedAt:_0x4cac4b,resolvedBy:_0x462b00,comments:_0x1d95ac}=_0x4dff12;_0x590d9e[_0x573053(0x160)](_0x359200)||_0x590d9e[_0x573053(0x140)]({'threadId':_0x359200,'channelId':_0x2788fb,'comments':_0x1d95ac?_0x1d95ac[_0x573053(0x12e)](R):[],'context':_0x108d26,'attributes':_0x231d67,'resolvedAt':_0x4cac4b,'resolvedBy':_0x462b00,'isFromAdapter':!0x0});}),this[_0x236e70(0x151)](_0x430191,_0x236e70(0x131),(_0x18331a,{commentThreadId:_0x2f964a,documentId:_0x41c9ed,context:_0x14ba02,unlinkedAt:_0x2d8994,attributes:_0x1dd0b0})=>{const _0x38805d=_0x236e70;_0x590d9e[_0x38805d(0x160)](_0x2f964a)&&_0x590d9e[_0x38805d(0x146)]({'threadId':_0x2f964a,'channelId':_0x41c9ed,'context':_0x14ba02,'unlinkedAt':_0x2d8994,'attributes':_0x1dd0b0,'isFromAdapter':!0x0});}),this[_0x236e70(0x151)](_0x430191,_0x236e70(0x15a),(_0x15e10e,{commentThreadId:_0x348ed9,resolvedBy:_0x56e4e,resolvedAt:_0x1df433})=>{const _0x54005b=_0x236e70,_0x3b1f4c=_0x590d9e[_0x54005b(0x160)](_0x348ed9);_0x3b1f4c&&_0x3b1f4c[_0x54005b(0x16d)]({'resolvedBy':_0x56e4e,'resolvedAt':_0x1df433,'isFromAdapter':!0x0});}),this[_0x236e70(0x151)](_0x430191,_0x236e70(0x12d),(_0x53d2ec,{commentThreadId:_0x484881})=>{const _0xa7a8b3=_0x236e70,_0x1fc460=_0x590d9e[_0xa7a8b3(0x160)](_0x484881);_0x1fc460&&_0x1fc460[_0xa7a8b3(0x177)]({'isFromAdapter':!0x0});}),this[_0x236e70(0x151)](_0x430191,_0x236e70(0x152),(_0x533de8,{commentThreadId:_0x36760d})=>{const _0x1c9120=_0x236e70,_0xa3a115=_0x590d9e[_0x1c9120(0x160)](_0x36760d);_0xa3a115&&_0xa3a115[_0x1c9120(0x143)]({'isFromAdapter':!0x0});}),this[_0x236e70(0x151)](_0x430191,_0x236e70(0x135),(_0x1cf3b5,_0x3ff286)=>{const _0x4e38e5=_0x236e70,_0x34e1fc=_0x3ff286[_0x4e38e5(0x154)],_0x23ec03=_0x590d9e[_0x4e38e5(0x160)](_0x34e1fc);_0x23ec03&&_0x23ec03[_0x4e38e5(0x148)]({...R(_0x3ff286),'isFromAdapter':!0x0});}),this[_0x236e70(0x151)](_0x430191,_0x236e70(0x123),(_0x2a255a,{commentThreadId:_0x1c30f5,commentId:_0x278f52,content:_0x49aa73,attributes:_0x1e129d})=>{const _0x19cbc7=_0x236e70,_0x2765e5=_0x590d9e[_0x19cbc7(0x160)](_0x1c30f5);if(_0x2765e5){const _0x53c2a3=_0x2765e5[_0x19cbc7(0x122)](_0x278f52);_0x53c2a3&&_0x53c2a3[_0x19cbc7(0x174)]({'content':_0x49aa73,'attributes':_0x1e129d,'isFromAdapter':!0x0});}}),this[_0x236e70(0x151)](_0x430191,_0x236e70(0x175),(_0x17e8b2,{commentThreadId:_0x199813,commentId:_0x5104fb})=>{const _0x5ba7c2=_0x236e70,_0x288d54=_0x590d9e[_0x5ba7c2(0x160)](_0x199813);if(_0x288d54){const _0x463a6f=_0x288d54[_0x5ba7c2(0x122)](_0x5104fb);_0x463a6f&&_0x463a6f[_0x5ba7c2(0x143)]({'isFromAdapter':!0x0});}}),await this[_0x236e70(0x11f)](_0x3e8eb6);}[_0x14e507(0x129)](){const _0x5c5f2b=_0x14e507;if(this[_0x5c5f2b(0x159)]instanceof _0x3bdf31){const _0x1a054d=this[_0x5c5f2b(0x159)][_0x5c5f2b(0x11e)][_0x5c5f2b(0x170)](_0x5c5f2b(0x13a));this[_0x5c5f2b(0x12a)](_0x1a054d);}}[_0x14e507(0x12a)](_0x595fba){const _0x98ed89=_0x14e507;if(!this[_0x98ed89(0x179)][_0x98ed89(0x155)](_0x595fba))throw new _0xd9532f(_0x98ed89(0x164),null,{'channelId':_0x595fba});this[_0x98ed89(0x137)](_0x595fba)[_0x98ed89(0x139)](),this[_0x98ed89(0x179)][_0x98ed89(0x168)](_0x595fba);}async[_0x14e507(0x138)](){const _0x2362b9=_0x14e507;for(const _0x3c478e of this[_0x2362b9(0x179)][_0x2362b9(0x15e)]())await this[_0x2362b9(0x11f)](_0x3c478e);if(this[_0x2362b9(0x159)]instanceof _0x3bdf31){const _0x35da99=this[_0x2362b9(0x159)][_0x2362b9(0x11e)][_0x2362b9(0x170)](_0x2362b9(0x13a)),_0x26414a=this[_0x2362b9(0x159)][_0x2362b9(0x12b)][_0x2362b9(0x170)](_0x10c4e9);_0x26414a[_0x2362b9(0x17e)](_0x35da99);const _0x25e1af=await this[_0x2362b9(0x179)][_0x2362b9(0x170)](_0x35da99)[_0x2362b9(0x133)]();_0x26414a[_0x2362b9(0x17d)](_0x35da99,_0x25e1af);}}async[_0x14e507(0x11f)](_0x3e83f6){const _0x52d5a0=_0x14e507,{connection:_0x3ff0d5}=this[_0x52d5a0(0x159)][_0x52d5a0(0x12b)][_0x52d5a0(0x170)](_0x39fb70),_0x293067=this[_0x52d5a0(0x159)][_0x52d5a0(0x12b)][_0x52d5a0(0x170)](_0x52d5a0(0x17c)),_0x2b6be8=this[_0x52d5a0(0x179)][_0x52d5a0(0x170)](_0x3e83f6),_0x4a60f9=await _0x2b6be8[_0x52d5a0(0x173)](_0x3ff0d5);await this[_0x52d5a0(0x130)](_0x4a60f9);const _0x668f5=new Set(Array[_0x52d5a0(0x180)](_0x293067[_0x52d5a0(0x16a)]({'channelId':_0x3e83f6}),_0x8ef0a1=>_0x8ef0a1['id']));for(const _0x182b03 of _0x4a60f9)_0x182b03[_0x52d5a0(0x136)]||_0x668f5[_0x52d5a0(0x168)](_0x182b03[_0x52d5a0(0x154)]);for(const _0x3ed76e of _0x668f5)_0x293067[_0x52d5a0(0x160)](_0x3ed76e)[_0x52d5a0(0x143)]({'isFromAdapter':!0x0});for(const _0x3fa087 of _0x4a60f9){let _0x35807c=_0x293067[_0x52d5a0(0x160)](_0x3fa087[_0x52d5a0(0x154)]);const {commentThreadId:_0x21983b,context:_0x572d35,attributes:_0x1104c0,resolvedBy:_0x3b67c8,resolvedAt:_0xd7bae4,unlinkedAt:_0x263697,deletedAt:_0x42f7dd}=_0x3fa087;if(_0x42f7dd)continue;_0x35807c||(_0x35807c=_0x293067[_0x52d5a0(0x140)]({'channelId':_0x3e83f6,'threadId':_0x21983b,'context':_0x572d35,'attributes':_0x1104c0||{},'resolvedBy':_0x3b67c8,'resolvedAt':_0xd7bae4,'unlinkedAt':_0x263697,'isFromAdapter':!0x0}));const _0x3d8c30=new Set(Array[_0x52d5a0(0x180)](_0x35807c[_0x52d5a0(0x157)],_0x425094=>_0x425094['id']));for(const _0x5eedce of _0x3fa087[_0x52d5a0(0x157)])_0x3d8c30[_0x52d5a0(0x168)](_0x5eedce[_0x52d5a0(0x161)]);for(const _0x5966c1 of _0x3d8c30)_0x35807c[_0x52d5a0(0x122)](_0x5966c1)[_0x52d5a0(0x143)]({'isFromAdapter':!0x0});for(const _0xa09f77 of _0x3fa087[_0x52d5a0(0x157)]){const _0xfd44a1=_0x35807c[_0x52d5a0(0x122)](_0xa09f77[_0x52d5a0(0x161)]);_0xfd44a1?_0xfd44a1[_0x52d5a0(0x13d)]!==_0xa09f77[_0x52d5a0(0x13d)]&&_0xfd44a1[_0x52d5a0(0x174)]({'content':_0xa09f77[_0x52d5a0(0x13d)],'isFromAdapter':!0x0}):_0x35807c[_0x52d5a0(0x148)](Object[_0x52d5a0(0x167)](R(_0xa09f77),{'isFromAdapter':!0x0}));}}}[_0x14e507(0x137)](_0x28c65a){const _0x1e4261=_0x14e507;if(!this[_0x1e4261(0x179)][_0x1e4261(0x155)](_0x28c65a))throw new _0xd9532f(_0x1e4261(0x144),null,{'channelId':_0x28c65a});return this[_0x1e4261(0x179)][_0x1e4261(0x170)](_0x28c65a);}async[_0x14e507(0x130)](_0x219152){const _0x51f745=_0x14e507,_0x4eb3cb=this[_0x51f745(0x159)][_0x51f745(0x12b)][_0x51f745(0x170)](_0x3bfb72),{connection:_0x101d4a}=this[_0x51f745(0x159)][_0x51f745(0x12b)][_0x51f745(0x170)](_0x39fb70),_0x3f8ecf=new Set();for(const {resolvedBy:_0x4a91d3,comments:_0x3012f0}of _0x219152){_0x4a91d3&&!_0x4eb3cb[_0x51f745(0x158)](_0x4a91d3)&&_0x3f8ecf[_0x51f745(0x127)](_0x4a91d3);for(const {userId:_0x42eb7a}of _0x3012f0)_0x4eb3cb[_0x51f745(0x158)](_0x42eb7a)||_0x3f8ecf[_0x51f745(0x127)](_0x42eb7a);}if(0x0===_0x3f8ecf[_0x51f745(0x178)])return;const _0x1d079d=await _0x58cda2[_0x51f745(0x17a)](_0x101d4a,Array[_0x51f745(0x180)](_0x3f8ecf));for(const _0x14c485 of _0x1d079d)_0x4eb3cb[_0x51f745(0x158)](_0x14c485['id'])||_0x4eb3cb[_0x51f745(0x12c)](_0x14c485);}}function _0x139a(_0x4c819f,_0x2288a2){const _0x5a0f0a=_0x5a0f();return _0x139a=function(_0x139aa2,_0x2dc86a){_0x139aa2=_0x139aa2-0x11e;let _0x340c98=_0x5a0f0a[_0x139aa2];return _0x340c98;},_0x139a(_0x4c819f,_0x2288a2);}a[_0x14e507(0x165)]=_0x3906aa;export default a;async function F(_0x283dc8){const _0x4bd1b3=_0x14e507;if(_0x4bd1b3(0x176)!==_0x283dc8[_0x4bd1b3(0x163)])throw _0x283dc8;}function B(_0x2e6e7a){const _0x83c058=_0x14e507;if((_0xe38ec1=_0x2e6e7a)[_0x83c058(0x169)][_0x83c058(0x128)](_0x83c058(0x14d))||_0xe38ec1[_0x83c058(0x169)][_0x83c058(0x128)](_0x83c058(0x15b))||_0xe38ec1[_0x83c058(0x169)][_0x83c058(0x128)](_0x83c058(0x150)))return new Promise(()=>{});var _0xe38ec1;throw _0x2e6e7a;}function R(_0x5b57d0){const _0x1fb3a0=_0x14e507;return{'threadId':_0x5b57d0[_0x1fb3a0(0x154)],'commentId':_0x5b57d0[_0x1fb3a0(0x161)],'content':_0x5b57d0[_0x1fb3a0(0x13d)],'createdAt':_0x5b57d0[_0x1fb3a0(0x13b)],'authorId':_0x5b57d0[_0x1fb3a0(0x125)],'attributes':_0x5b57d0[_0x1fb3a0(0x15d)]||{}};}