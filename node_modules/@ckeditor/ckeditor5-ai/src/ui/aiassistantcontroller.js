/*
 *             Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
function _0x6413(){const _0x33321b=['custom','currentContext','previousActionId','startsWith','3002985gjuqMI','endsWith','22fhNUaa','_xmlSerializer','catch','finally','previousLabel','mainAction','nodeType','view','querySelector','length','startProcessing','handleError','tryAgainEvent','push','makeRequest','exec','isRendered','document','remove','5465285AZpTgJ','childNodes','processor','message','13694879vAUfiT','_sanitizationContainer','<h1></h1>','editing','toView','stopListening','reset','_handleQuery','set','editor','from','submitPrompt','_stripMarkdownSyntax','name','createElement','set:currentContext','ELEMENT_NODE','match','innerHTML','stopProcessing','value','stringify','once','5008080iywchE','finishProcessing','listenTo','parseFromString','reverse','viewToDom','5857638qoiEwr','substring','```html','_domParser','prompt','_parseAndNormalizeContent','8klaQuP','10FYNxKH','_sanitizeHTML','htmlProcessor','_isH1TagSupportEnabled','body','textAdapter','trim','destroy','element','3uXnZCo','rename','serializeToString','render','domConverter','data','_normalizeResponseHeadings','toModel','2292644DHPROu','div','text/html','updateView','```','previousContext','isProcessing','currentResponse','abort','then','initialContext','setContentOf','previousQuery','32768ZuRbGZ'];_0x6413=function(){return _0x33321b;};return _0x6413();}const _0x55afd1=_0x4af0;(function(_0xc62114,_0x3bb8b0){const _0x4af98c=_0x4af0,_0x4514a6=_0xc62114();while(!![]){try{const _0x5c8799=-parseInt(_0x4af98c(0x160))/0x1*(-parseInt(_0x4af98c(0x159))/0x2)+-parseInt(_0x4af98c(0x144))/0x3*(-parseInt(_0x4af98c(0x14c))/0x4)+parseInt(_0x4af98c(0x12e))/0x5+-parseInt(_0x4af98c(0x134))/0x6+parseInt(_0x4af98c(0x173))/0x7+-parseInt(_0x4af98c(0x13a))/0x8*(-parseInt(_0x4af98c(0x15e))/0x9)+parseInt(_0x4af98c(0x13b))/0xa*(-parseInt(_0x4af98c(0x177))/0xb);if(_0x5c8799===_0x3bb8b0)break;else _0x4514a6['push'](_0x4514a6['shift']());}catch(_0x671a6f){_0x4514a6['push'](_0x4514a6['shift']());}}}(_0x6413,0xca3df));function _0x4af0(_0x202d07,_0x4df524){const _0x641385=_0x6413();return _0x4af0=function(_0x4af0f1,_0x31d038){_0x4af0f1=_0x4af0f1-0x11c;let _0x47fbda=_0x641385[_0x4af0f1];return _0x47fbda;},_0x4af0(_0x202d07,_0x4df524);}import{ObservableMixin as _0x501064}from'ckeditor5/src/utils.js';import{AIRequestError as _0x19000e}from'../adapters/aiadapter.js';import{Matcher as _0x1caef4,UpcastWriter as _0x1b71c0}from'ckeditor5/src/engine.js';const X=new RegExp(/^(.*?)<[a-zA-Z][a-zA-Z0-9_\-.]*[ >]/,'is');export default class k extends/* #__PURE__ -- @preserve */
_0x501064(){constructor(_0x4da980,_0x22c88c,_0x1d9a71){const _0x30b65a=_0x4af0;super(),this[_0x30b65a(0x120)]=_0x4da980,this[_0x30b65a(0x140)]=_0x22c88c,this[_0x30b65a(0x178)]=document[_0x30b65a(0x125)](_0x30b65a(0x14d)),this[_0x30b65a(0x137)]=new DOMParser(),this[_0x30b65a(0x161)]=new XMLSerializer(),this[_0x30b65a(0x167)]=_0x1d9a71,this[_0x30b65a(0x11f)]({'initialContext':'','currentContext':'','currentResponse':'','previousContext':void 0x0,'previousQuery':void 0x0,'previousLabel':void 0x0,'isProcessing':!0x1}),this['on'](_0x30b65a(0x126),(_0x1b094c,_0x3ad3e3,_0x560b05)=>{const _0x552cf4=_0x30b65a;this[_0x552cf4(0x167)][_0x552cf4(0x12b)]=this[_0x552cf4(0x13c)](_0x560b05);}),this[_0x30b65a(0x130)](this[_0x30b65a(0x167)],_0x30b65a(0x122),(_0x309156,_0x21e612)=>{const _0x3c68e3=_0x30b65a,_0x171604=this[_0x3c68e3(0x15b)]||this[_0x3c68e3(0x156)];this[_0x3c68e3(0x11e)](_0x21e612,_0x171604,_0x3c68e3(0x15a));}),this[_0x30b65a(0x130)](this[_0x30b65a(0x167)],_0x30b65a(0x16c),()=>{const _0x4cbbdf=_0x30b65a;this[_0x4cbbdf(0x167)][_0x4cbbdf(0x138)]=this[_0x4cbbdf(0x164)],this[_0x4cbbdf(0x11e)](this[_0x4cbbdf(0x158)],this[_0x4cbbdf(0x151)],this[_0x4cbbdf(0x15c)],this[_0x4cbbdf(0x164)]);}),this[_0x30b65a(0x130)](this[_0x30b65a(0x167)],_0x30b65a(0x12a),()=>{const _0x260e4c=_0x30b65a;this[_0x260e4c(0x12a)]();});}[_0x55afd1(0x142)](){const _0x3a5127=_0x55afd1;this[_0x3a5127(0x11c)]();}async[_0x55afd1(0x14f)]({actionId:_0x59405a,query:_0x4520e4,htmlContent:_0x44bc73,label:_0x3864bf,mainActionLabel:_0x2c7495}){const _0x40b5fc=_0x55afd1;this[_0x40b5fc(0x167)][_0x40b5fc(0x138)]=_0x3864bf,this[_0x40b5fc(0x167)][_0x40b5fc(0x165)]=_0x2c7495,this[_0x40b5fc(0x156)]=_0x44bc73,_0x4520e4&&(this[_0x40b5fc(0x167)][_0x40b5fc(0x170)]?this[_0x40b5fc(0x11e)](_0x4520e4,_0x44bc73,_0x59405a,_0x3864bf):this[_0x40b5fc(0x167)][_0x40b5fc(0x12d)](_0x40b5fc(0x147),()=>{const _0x44c3de=_0x40b5fc;this[_0x44c3de(0x11e)](_0x4520e4,_0x44bc73,_0x59405a,_0x3864bf);}));}[_0x55afd1(0x12a)](){const _0x2f391b=_0x55afd1;this[_0x2f391b(0x152)]&&(this[_0x2f391b(0x152)]=!0x1,this[_0x2f391b(0x167)][_0x2f391b(0x12f)](),this[_0x2f391b(0x140)][_0x2f391b(0x154)]());}[_0x55afd1(0x11d)](){const _0x3f99fd=_0x55afd1;this[_0x3f99fd(0x156)]='',this[_0x3f99fd(0x15b)]='',this[_0x3f99fd(0x153)]='',this[_0x3f99fd(0x151)]='',this[_0x3f99fd(0x158)]='',this[_0x3f99fd(0x164)]='',this[_0x3f99fd(0x15c)]=void 0x0,this[_0x3f99fd(0x167)][_0x3f99fd(0x11d)](),this[_0x3f99fd(0x12a)]();}async[_0x55afd1(0x11e)](_0x177c15,_0x3cf444,_0x696252,_0x39ddd4){const _0x1098f6=_0x55afd1;return this[_0x1098f6(0x152)]=!0x0,this[_0x1098f6(0x167)][_0x1098f6(0x16a)](),this[_0x1098f6(0x151)]=_0x3cf444,this[_0x1098f6(0x158)]=_0x177c15,this[_0x1098f6(0x164)]=_0x39ddd4||_0x177c15,this[_0x1098f6(0x15c)]=_0x696252,new Promise(_0xd6c4ef=>{const _0x2f1492=_0x1098f6;this[_0x2f1492(0x140)][_0x2f1492(0x16e)]({'query':_0x177c15,'context':_0x3cf444,'onData':_0x25e65e=>{const _0x4ab2c7=_0x2f1492;this[_0x4ab2c7(0x153)]=_0x25e65e,this[_0x4ab2c7(0x15b)]=this[_0x4ab2c7(0x139)](this[_0x4ab2c7(0x153)]);},'actionId':_0x696252})[_0x2f1492(0x155)](()=>{const _0x18b21f=_0x2f1492;!this[_0x18b21f(0x15b)]&&this[_0x18b21f(0x153)]&&(this[_0x18b21f(0x15b)]=this[_0x18b21f(0x139)](this[_0x18b21f(0x153)],!0x0));})[_0x2f1492(0x162)](_0x4d5181=>{const _0x2e123c=_0x2f1492;_0x4d5181 instanceof _0x19000e?this[_0x2e123c(0x167)][_0x2e123c(0x16b)](_0x4d5181[_0x2e123c(0x176)]):this[_0x2e123c(0x167)][_0x2e123c(0x16b)](),_0xd6c4ef();})[_0x2f1492(0x163)](()=>{const _0x4be2e2=_0x2f1492;this[_0x4be2e2(0x12a)](),_0xd6c4ef();});});}[_0x55afd1(0x139)](_0x126191,_0x3742d4=!0x1){const _0x5f080a=_0x55afd1,_0x161e7a=X[_0x5f080a(0x16f)](_0x126191);_0x126191=_0x161e7a?_0x126191[_0x5f080a(0x135)](_0x161e7a[0x1][_0x5f080a(0x169)]):_0x126191[_0x5f080a(0x169)]<0x64&&!_0x3742d4?'':this[_0x5f080a(0x123)](_0x126191);const _0x126cd5=this[_0x5f080a(0x137)][_0x5f080a(0x131)](_0x126191,_0x5f080a(0x14e));if(_0x161e7a){const _0x289539=Array[_0x5f080a(0x121)](_0x126cd5[_0x5f080a(0x13f)][_0x5f080a(0x174)]);_0x289539[_0x5f080a(0x132)]();for(const _0x588ef8 of _0x289539){if(_0x588ef8[_0x5f080a(0x166)]==Node[_0x5f080a(0x127)])break;_0x588ef8[_0x5f080a(0x172)]();}}const _0x225b11=this[_0x5f080a(0x120)][_0x5f080a(0x149)][_0x5f080a(0x175)][_0x5f080a(0x17b)](this[_0x5f080a(0x161)][_0x5f080a(0x146)](_0x126cd5[_0x5f080a(0x13f)]));return this[_0x5f080a(0x13e)]()||this[_0x5f080a(0x14a)](_0x225b11),this[_0x5f080a(0x120)][_0x5f080a(0x149)][_0x5f080a(0x12c)](this[_0x5f080a(0x120)][_0x5f080a(0x149)][_0x5f080a(0x14b)](_0x225b11));}[_0x55afd1(0x14a)](_0x5e2f60){const _0x298dad=_0x55afd1,_0x388b30=new _0x1b71c0(this[_0x298dad(0x120)][_0x298dad(0x17a)][_0x298dad(0x167)][_0x298dad(0x171)]),_0x58a2d2=new _0x1caef4({'name':/^h[1-5]$/}),_0x53f2d1=[];let _0x539767=!0x1;for(const _0xec9b3c of _0x5e2f60)_0xec9b3c['is'](_0x298dad(0x143))&&_0x58a2d2[_0x298dad(0x128)](_0xec9b3c)&&(_0x53f2d1[_0x298dad(0x16d)](_0xec9b3c),'h1'==_0xec9b3c[_0x298dad(0x124)]&&(_0x539767=!0x0));if(_0x539767){for(const _0x27159a of _0x53f2d1)_0x388b30[_0x298dad(0x145)]('h'+(parseInt(_0x27159a[_0x298dad(0x124)][0x1])+0x1),_0x27159a);}}[_0x55afd1(0x13e)](){const _0x36e6a3=_0x55afd1,{data:_0x4fe59e,editing:_0x45ec37}=this[_0x36e6a3(0x120)],_0x2980c2=_0x4fe59e[_0x36e6a3(0x13d)][_0x36e6a3(0x17b)](_0x36e6a3(0x179)),_0x364361=_0x4fe59e[_0x36e6a3(0x17b)](_0x4fe59e[_0x36e6a3(0x14b)](_0x2980c2));return!!_0x45ec37[_0x36e6a3(0x167)][_0x36e6a3(0x148)][_0x36e6a3(0x133)](_0x364361)[_0x36e6a3(0x168)]('h1');}[_0x55afd1(0x13c)](_0x577afb){const _0x227223=_0x55afd1;return this[_0x227223(0x120)][_0x227223(0x17a)][_0x227223(0x167)][_0x227223(0x148)][_0x227223(0x157)](this[_0x227223(0x178)],_0x577afb),this[_0x227223(0x178)][_0x227223(0x129)];}[_0x55afd1(0x123)](_0x49862d){const _0x2380d3=_0x55afd1,_0x42aadb=_0x49862d[_0x2380d3(0x141)]();return _0x42aadb[_0x2380d3(0x15d)](_0x2380d3(0x136))?_0x42aadb[_0x2380d3(0x15f)](_0x2380d3(0x150))?_0x42aadb[_0x2380d3(0x135)](0x7,_0x42aadb[_0x2380d3(0x169)]-0x3):_0x42aadb[_0x2380d3(0x135)](0x7):_0x49862d;}}