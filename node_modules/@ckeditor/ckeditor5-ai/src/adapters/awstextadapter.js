/*
 *             Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x12483e=_0x3cb2;function _0x3cb2(_0x472121,_0xc77cab){const _0x264f79=_0x264f();return _0x3cb2=function(_0x3cb2fb,_0x39ad93){_0x3cb2fb=_0x3cb2fb-0x7f;let _0x40e2f1=_0x264f79[_0x3cb2fb];return _0x40e2f1;},_0x3cb2(_0x472121,_0xc77cab);}(function(_0x59add1,_0x35b6e5){const _0x43916f=_0x3cb2,_0x59dc24=_0x59add1();while(!![]){try{const _0x87059e=parseInt(_0x43916f(0xb9))/0x1+parseInt(_0x43916f(0x90))/0x2+-parseInt(_0x43916f(0xae))/0x3*(parseInt(_0x43916f(0x84))/0x4)+parseInt(_0x43916f(0xa9))/0x5*(parseInt(_0x43916f(0x8d))/0x6)+parseInt(_0x43916f(0xb7))/0x7*(parseInt(_0x43916f(0x88))/0x8)+parseInt(_0x43916f(0xa7))/0x9*(parseInt(_0x43916f(0x91))/0xa)+-parseInt(_0x43916f(0xca))/0xb*(parseInt(_0x43916f(0xbe))/0xc);if(_0x87059e===_0x35b6e5)break;else _0x59dc24['push'](_0x59dc24['shift']());}catch(_0x1443a4){_0x59dc24['push'](_0x59dc24['shift']());}}}(_0x264f,0xe276c));import{default as _0x588420}from'./aitextadapter.js';import{AIRequestError as _0x5d121b}from'./aiadapter.js';import{BedrockRuntimeClient as _0x1a67fb,InvokeModelCommand as _0x4a62cc,InvokeModelWithResponseStreamCommand as _0x60ea94}from'@aws-sdk/client-bedrock-runtime';function _0x264f(){const _0x5a390c=['chunk','POST','utf-8','6kToJLE','toString','_getGeneratedText','1116444HNTahg','7110rSKeOC','pluginName','signal','ai.aws.requestParameters','ai.aws.bedrockClientConfig','read','get','sendRequest','resolve','join','\x0a[/INST]','Your\x20task\x20is\x20to\x20generate\x20HTML\x20content\x20accordingly\x20to\x20the\x20given\x20instruction.\x20Never\x20include\x20<img>\x20tag\x20in\x20your\x20response\x20even\x20if\x20asked\x20for.\x20Your\x20answer\x20must\x20be\x20a\x20well-structured\x20and\x20properly\x20formatted\x20HTML\x20code.\x20Answer\x20only\x20with\x20the\x20generated\x20HTML\x20content.\x20Do\x20not\x20add\x20any\x20additional\x20remarks\x20or\x20notes.\x20Do\x20not\x20act\x20like\x20a\x20chatbot\x20or\x20a\x20real\x20person.','bytes','<<SYS>>\x0a','decode','stringify','_requestHeaders','anthropic.claude-v2','\x0aYou\x20must\x20keep\x20the\x20text\x20formatting.\x0a\x0aContent:\x0a','filter','Instruction:\x0a','anthropic.claude','19917OhyMpM','_prepareRequestHeaders','8427605XpLVoM','_processProxyRequest','text','_requestParameters','send','306QTmYel','test','locale','AI_ERROR_UNSUPPORTED_MODEL','_readStreamableResponse','abortController','json','_readStaticResponse','ai.aws.requestHeaders','924mAmDmd','_bedrockClientConfig','1772120oJmgzc','\x0a<</SYS>>\x0a[INST]\x0a','split','config','meta.llama','3777792VBjlJr','bedrock-2023-05-31','getReader','generations','from','map','completions','define','body','AWSTextAdapter','parse','_processAWSRequest','154ACtZCR','application/json','_apiUrl','ai.aws.apiUrl','length','ai21.j2','preparePrompt','completion','Human:\x0a','utf8','Your\x20task\x20is\x20to\x20execute\x20the\x20instruction\x20using\x20the\x20provided\x20HTML\x20content.\x20Follow\x20the\x20instruction\x20closely.\x20Your\x20answer\x20must\x20be\x20a\x20properly\x20formatted\x20HTML\x20code.\x20Do\x20not\x20add\x20any\x20additional\x20remarks\x20or\x20notes.\x20Do\x20not\x20act\x20like\x20a\x20chatbot\x20or\x20a\x20real\x20person.','cohere.command','data','editor','generation','30740tFFiWT','_prepareRequestParameters','getModelFamily','_readAsyncIterableResponse','32096THcKBI','\x0a\x0aAssistant:'];_0x264f=function(){return _0x5a390c;};return _0x264f();}import{getTranslation as _0x3b803b}from'../utils/common-translations.js';export default class J extends _0x588420{static get[_0x12483e(0x92)](){const _0x157606=_0x12483e;return _0x157606(0xc7);}constructor(_0x406620){const _0x49baec=_0x12483e;super(_0x406620),_0x406620[_0x49baec(0xbc)][_0x49baec(0x97)](_0x49baec(0x94))||_0x406620[_0x49baec(0xbc)][_0x49baec(0xc5)](_0x49baec(0x94),{'model':_0x49baec(0xa2),'max_tokens_to_sample':0x7d0,'temperature':0x1,'top_p':0x1,'top_k':0xfa,'anthropic_version':_0x49baec(0xbf),'stream':!0x0}),this[_0x49baec(0xcc)]=_0x406620[_0x49baec(0xbc)][_0x49baec(0x97)](_0x49baec(0xcd)),this[_0x49baec(0xb8)]=_0x406620[_0x49baec(0xbc)][_0x49baec(0x97)](_0x49baec(0x95)),this[_0x49baec(0xa1)]=_0x406620[_0x49baec(0xbc)][_0x49baec(0x97)](_0x49baec(0xb6)),this[_0x49baec(0xac)]=_0x406620[_0x49baec(0xbc)][_0x49baec(0x97)](_0x49baec(0x94));}async[_0x12483e(0x98)]({query:_0x4aa817,context:_0x21e54b,onData:_0x4706c6,actionId:_0x2421f3}){const _0x11972e=_0x12483e,{model:_0x24d09c,stream:_0x397f64,..._0x5c701d}=await this[_0x11972e(0x85)](this[_0x11972e(0xac)],_0x2421f3),_0x551a35={'prompt':await this[_0x11972e(0xd0)](_0x4aa817,_0x21e54b,_0x24d09c,_0x2421f3),..._0x5c701d};this[_0x11972e(0xcc)]?await this[_0x11972e(0xaa)](_0x551a35,_0x24d09c,_0x397f64,_0x4706c6,_0x2421f3):await this[_0x11972e(0xc9)](_0x551a35,_0x24d09c,_0x397f64,_0x4706c6);}async[_0x12483e(0xd0)](_0x13ed83,_0x3de350,_0x245fc5,_0x5495d4){const _0x1acd52=_0x12483e;let _0x58990b,_0x1117ab;return _0x3de350?(_0x58990b=_0x1acd52(0x7f),_0x1117ab=_0x1acd52(0xa5)+_0x13ed83+_0x1acd52(0xa3)+_0x3de350):(_0x58990b=_0x1acd52(0x9c),_0x1117ab=_0x13ed83),_0x1acd52(0xbd)==this[_0x1acd52(0x86)](_0x245fc5)?_0x1acd52(0x9e)+_0x58990b+_0x1acd52(0xba)+_0x1117ab+_0x1acd52(0x9b):_0x1acd52(0xd2)+_0x58990b+'\x0a'+_0x1117ab+_0x1acd52(0x89);}[_0x12483e(0x86)](_0x2bc759){const _0x1f7dac=_0x12483e;if(/^anthropic\.claude/[_0x1f7dac(0xaf)](_0x2bc759))return _0x1f7dac(0xa6);if(/^ai21\.j2/[_0x1f7dac(0xaf)](_0x2bc759))return _0x1f7dac(0xcf);if(/^cohere\.command/[_0x1f7dac(0xaf)](_0x2bc759))return _0x1f7dac(0x80);if(/^meta\.llama/[_0x1f7dac(0xaf)](_0x2bc759))return _0x1f7dac(0xbd);throw new _0x5d121b(_0x3b803b(this[_0x1f7dac(0x82)][_0x1f7dac(0xb0)],_0x1f7dac(0xb1),_0x2bc759));}async[_0x12483e(0xaa)](_0x350e85,_0x10a7d3,_0x3c35ae,_0x73fcab,_0x15e286){const _0x557c01=_0x12483e,_0x1060c7={'method':_0x557c01(0x8b),'headers':await this[_0x557c01(0xa8)](this[_0x557c01(0xa1)],_0x15e286),'body':JSON[_0x557c01(0xa0)]({..._0x350e85,'model':_0x10a7d3,'stream':_0x3c35ae}),'signal':this[_0x557c01(0xb3)][_0x557c01(0x93)]},_0x4acf48=await fetch(this[_0x557c01(0xcc)],_0x1060c7);_0x3c35ae?await this[_0x557c01(0xb2)](_0x4acf48,_0x10a7d3,_0x73fcab):await this[_0x557c01(0xb5)](_0x4acf48,_0x10a7d3,_0x73fcab);}async[_0x12483e(0xc9)](_0x5d0e66,_0x72976b,_0xe58717,_0x57ffba){const _0x252e1c=_0x12483e,_0x411302=new _0x1a67fb(this[_0x252e1c(0xb8)]),_0x1cb08f={'body':JSON[_0x252e1c(0xa0)](_0x5d0e66),'contentType':_0x252e1c(0xcb),'accept':_0x252e1c(0xcb),'modelId':_0x72976b};let _0x5b35b4;if(_0xe58717){const _0x22553c=new _0x60ea94(_0x1cb08f);_0x5b35b4=await _0x411302[_0x252e1c(0xad)](_0x22553c,{'abortSignal':this[_0x252e1c(0xb3)][_0x252e1c(0x93)]}),await this[_0x252e1c(0x87)](_0x5b35b4,_0x72976b,_0x57ffba);}else{const _0x2ee0e4=new _0x4a62cc(_0x1cb08f);_0x5b35b4=await _0x411302[_0x252e1c(0xad)](_0x2ee0e4,{'abortSignal':this[_0x252e1c(0xb3)][_0x252e1c(0x93)]}),await this[_0x252e1c(0xb5)](_0x5b35b4,_0x72976b,_0x57ffba);}}async[_0x12483e(0x87)](_0x3c282c,_0x2983df,_0x36a23c){const _0x29a4ec=_0x12483e,_0x546c2c=_0x3c282c[_0x29a4ec(0xc6)],_0x59c2a8=new TextDecoder(_0x29a4ec(0x8c));let _0x36d42b='';for await(const _0x112dd0 of _0x546c2c)if(_0x112dd0[_0x29a4ec(0x8a)]){const _0x26b57f=_0x59c2a8[_0x29a4ec(0x9f)](_0x112dd0[_0x29a4ec(0x8a)][_0x29a4ec(0x9d)]),_0x3e974d=JSON[_0x29a4ec(0xc8)](_0x26b57f);_0x36d42b+=this[_0x29a4ec(0x8f)](_0x3e974d,_0x2983df),_0x36a23c(_0x36d42b);}return Promise[_0x29a4ec(0x99)]();}async[_0x12483e(0xb2)](_0x2c698e,_0x419e00,_0x2a389f){const _0x49c795=_0x12483e,_0x5e6737=_0x2c698e[_0x49c795(0xc6)],_0x425d81=new TextDecoder(_0x49c795(0x8c)),_0x20deb1=_0x5e6737[_0x49c795(0xc0)]();let _0x4471da='',_0x51c94f='',_0x579525=!0x1;for(;!_0x579525;){const {done:_0x39907f,value:_0x59f1cc}=await _0x20deb1[_0x49c795(0x96)]();if(_0x579525=_0x39907f,_0x579525)break;const _0x2bb6ca=(_0x4471da+_0x425d81[_0x49c795(0x9f)](_0x59f1cc))[_0x49c795(0xbb)]('\x0a')[_0x49c795(0xc3)](_0x3fc9e8=>{const _0x4687f3=_0x49c795;try{return _0x4471da='',JSON[_0x4687f3(0xc8)](_0x3fc9e8);}catch(_0x35f4af){return _0x4471da=_0x3fc9e8,null;}})[_0x49c795(0xa4)](_0x1de494=>null!==_0x1de494);_0x2bb6ca[_0x49c795(0xce)]&&(_0x51c94f+=_0x2bb6ca[_0x49c795(0xc3)](_0x502727=>this[_0x49c795(0x8f)](_0x502727,_0x419e00))[_0x49c795(0x9a)](''),_0x2a389f(_0x51c94f));}return Promise[_0x49c795(0x99)]();}async[_0x12483e(0xb5)](_0x352b25,_0x543839,_0x2365c3){const _0x13033b=_0x12483e;let _0x15e7c0;return _0x15e7c0=_0x352b25 instanceof Response?await _0x352b25[_0x13033b(0xb4)]():JSON[_0x13033b(0xc8)](Buffer[_0x13033b(0xc2)](_0x352b25[_0x13033b(0xc6)])[_0x13033b(0x8e)](_0x13033b(0xd3))),(_0x2365c3(this[_0x13033b(0x8f)](_0x15e7c0,_0x543839)),Promise[_0x13033b(0x99)]());}[_0x12483e(0x8f)](_0xe77a51,_0xbcb2f1){const _0x478ddd=_0x12483e;switch(this[_0x478ddd(0x86)](_0xbcb2f1)){case _0x478ddd(0xa6):return _0xe77a51[_0x478ddd(0xd1)];case _0x478ddd(0xcf):return _0xe77a51[_0x478ddd(0xc4)][0x0][_0x478ddd(0x81)][_0x478ddd(0xab)];case _0x478ddd(0x80):return _0xe77a51[_0x478ddd(0xc1)][0x0][_0x478ddd(0xab)];case _0x478ddd(0xbd):return _0xe77a51[_0x478ddd(0x83)];}}}